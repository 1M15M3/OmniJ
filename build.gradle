ext.groovyVersion = '2.4.3'

apply from: 'gradle/groovydoc.gradle'
apply from: 'gradle/idea.gradle'

allprojects {
    apply plugin: 'java'
    apply plugin: 'groovy'

    repositories {
        jcenter()
        maven { url 'https://oss.jfrog.org/artifactory/oss-release-local' }
        maven { url 'https://oss.sonatype.org/content/repositories/snapshots/'}
    }

    dependencies {
        compile "org.codehaus.groovy:groovy:${groovyVersion}"
    }
}

subprojects {

    dependencies {
        compile 'org.bitcoinj:bitcoinj-core:0.13-SNAPSHOT'
        compile 'org.slf4j:slf4j-api:1.7.7'

        runtime 'org.slf4j:slf4j-jdk14:1.7.7'               // Runtime implementation of slf4j
        testRuntime 'org.slf4j:slf4j-jdk14:1.7.7'           // Runtime implementation of slf4j

        testCompile("org.spockframework:spock-core:1.0-groovy-2.4") {
            exclude module: "groovy-all"
        }
    }

    compileJava {
        options.compilerArgs << '-Xlint:unchecked'
    }

    test {
        // Disable the test report for the individual test task
//        reports.html.enabled = false
        // show standard out and standard error of the test JVM(s) on the console
        testLogging.showStandardStreams = true
    }
}

task testReport(type: TestReport) {
    destinationDir = file("$buildDir/reports/allTests")
    // Include the results from the `test` task in all subprojects
    reportOn subprojects*.test
}

